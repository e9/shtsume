#  **shtsume  v1.0.0**

v1.0.0は以下の特徴があります。  
・コマンドライン（shell)からの詰将棋解図機能追加  
・詰将棋解図エンジンとしての高速化・高精度化  
    ・無駄合判定の厳格化  
    ・不完全作への対応  
    ・npsで約10%の向上  
    
[動作確認環境]  
ハード:  
Mac mini 　　 (M1 2020) メモリ16GB  
OS:  
macOS Monterey    
将棋GUI:  
将棋所Mac  

[インストール]
- プログラムの実行が可能なフォルダ（Applications等)にバイナリをコピーします。  
- ダウンロードによるOSのセキュリティ警告が出る場合は一度手動で開き、解除しておきます。  

[使用方法]
１、将棋GUI（将棋所Mac等）に詰将棋エンジンとして登録してください。  
２、コマンドラインアプリとしての使用も可能。  

１）USIエンジンオプション
    ハッシュメモリ     : 局面表に割り当てるメモリサイズを指定します。デフォルト値 256(Mbyte)
    末端探索レベル     : 末端局面での証明数しきい値最小値を指定します。デフォルト値 4
    余詰探索レベル     : 発見した詰手順の他に別詰がないか探索します。  デフォルト値 0
    余詰探索時の棋譜出力: 探索途中レベルごとの詰手順をkif形式で出力します。
    探索ログの出力     : 詰探索終了後、探索ログを出力します。
    出力用フォルダ     : このフォルダに棋譜、探索ログファイルを出力します。
     
２）コマンドライン
書式  
     shtsume [-hvkgdy][-n pn][-m size][-l lv][-i limit]  
             [-j dep][-t int] sfen_string  
     sfen_stringで指定された局面について詰探索を試みます。  
オプション
    -h --help     : プログラムの使用法を表示して終了します。  
    -v --version  : プログラムのバージョンを表示して終了します。  
    
    -k --kifu     : レベル毎の棋譜を出力します。(出力先：ホームディレクトリ)  
    -g --log      : 探索LOGを出力します。     (出力先：ホームディレクトリ)  
    -y --yomi     : 探索中、読み筋表示。  
    -n --minpn    : 末端探索証明数を指定します。デフォルト値 4 (min 3 max 6)  
    -m --memory   : 局面表で使用するメモリーサイズを指定します。デフォルト値 256(MByte)  
                                                        (min 1 max 65535)  
    -l --level    : 探索レベルを指定します。デフォルト値 0。   (min 0  max 50)  
    -i --limit    : 思考制限時間を指定します（秒単位）。デフォルト値　-1(無制限）  
    -j --ydep     : 表示読み筋深さ。デフォルト値 5           (min 5 max 30)  
    -t --yint     : 読み筋表示インターバル。デフォルト値 5(秒) (min 1 max 60)  
    
[既知の問題点]  
・マシンのメモリ容量の半分以上のメモリ設定を行うと極端に動作が遅くなります。  
　（例：８GBマシンの場合４GBまで。16GBマシンでは6GB以下が快適レベル）  
・玉方がどう応じても駒を余す手順が存在する局面の場合（実戦、不完全作など）、  
　出力手順が不定になります。  
・将棋GUIの計測時間とshtsumeの計測時間が異なってくる場合があります。  

    
#  **shtsume  v0.2.0-beta**

v0.2.0-beta版は以下の特徴があります。  
・高効率　　　　少ない探索量で詰みを発見できます。  
・省メモリ　　　一括GC方式により少ないメモリでも長時間探索を続けることができます。  
・高精度　　　　パラメータ設定により変化の複雑な作品でも正解手順を導くことができます。  
　　　　　　　　既知の難問も数多く解くことができます。

[動作確認環境]  
ハード:  
Mac mini 　　 (M1 2020) メモリ16GB  
Mac Book Pro (INTEL i5) メモリ８GB  
OS:  
macOS Monterey    
将棋GUI:  
将棋所Mac  

[インストール]
- プログラムの実行が可能なフォルダ（Applications等)にバイナリをコピーします。
- ダウンロードによるOSのセキュリティ警告が出る場合は一度手動で開き、解除しておきます。

[使用方法]  
将棋GUI（将棋所Mac等）に詰将棋エンジンとして登録してください。

[設定]  
メモリ　　　　128MByte - 7168MByte (default 256M)  
局面表に使用するメモリサイズです。難しい問題を解く場合、メモリサイズを大きく取ってください。

レベル　　　　0 - 50 (default 0)  
余詰探索回数。前回の各局面証明数しきい値に１加えた値で詰み着手以外の候補手の探索を行います。  
これが設定レベル値まで繰り返され、迂回手順や手順前後を発見につながりより洗練された詰手順を  
返すことがありますが一方時間がかかるようになります。

mt_min_pn 　3 - 10 (default 4)  
末端探索における最小証明数しきい値。この値を大きく取ると収束余詰を発見しやすくなります。　

out_lvkif       (default: OFF)  
チェックを入れると、詰め手順をレベル毎にuser_pathフォルダにtsumelv*.kifというファイル名で  
出力されます。（最終詰手順は除く。）

summary      (default: OFF)  
チェックを入れると詰みを発見した場合、探索情報をsearch_report(日時).logという名前で  
user_pathフォルダ内に出力されます。

user_path    (default: 環境変数"HOME"の設定値）  
探索レベル毎詰手順や探索情報を生成するフォルダです。

[既知の問題点]  
・マシンのメモリ容量の半分以上のメモリ設定を行うと極端に動作が遅くなります。  
　（例：８GBマシンの場合４GBまでが限度。）  
・玉方がどう応じても駒を余す手順が存在する局面の場合（実戦、不完全作など）、  
　出力手順が不定になります。  
・将棋GUIの計測時間とshtsumeの計測時間が異なってくる場合があります。  

